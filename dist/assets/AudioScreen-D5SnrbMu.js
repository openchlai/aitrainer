import{_ as $,q as B,r as n,m as E,c as d,w as p,a as D,b as a,t as l,s as L,x as M,y as m,o as R,z as h}from"./index-BsEMERiD.js";const V={class:"audio-screen"},j={class:"top-bar"},q={class:"audio-container"},z=["src"],F={class:"playback-buttons"},U=["disabled"],Y=["disabled"],G={class:"current-time"},H={class:"action-buttons"},J=["disabled"],K=["disabled"],O=["disabled"],Q=["disabled"],y="http://127.0.0.1:8000",W={__name:"AudioScreen",setup(X){const A=B(),_=M(),s=n(0),o=n(null),i=n(!1),c=n(0),k=n(!1),f=n(null);E(()=>{console.log(_.params.startIndex);const e=parseInt(_.params.startIndex,10);console.log(e),s.value=Number.isNaN(e)?0:e});const r=d(()=>A.audioList),t=d(()=>r.value[s.value]||{}),b=d(()=>r.value.length);console.log("Current Audio:",t.value),console.log("audioList:",r.value.length);const x=d(()=>t.value.audio_file?(console.log(t.value.audio_file),t.value.audio_file):"");p(t,async()=>{i.value=!1,c.value=0,await h(),o.value&&o.value.load()}),p(o,e=>{e&&(e.ontimeupdate=()=>{c.value=e.currentTime},e.onplay=()=>{i.value=!0},e.onpause=()=>{i.value=!1})});function C(){o.value&&o.value.play()}function w(){o.value&&o.value.pause()}function T(){o.value&&(o.value.currentTime=0,i.value=!1,o.value.pause())}function g(e){if(!o.value)return;const u=o.value.currentTime+e,v=o.value.duration||0;o.value.currentTime=Math.min(Math.max(u,0),v)}p(k,async e=>{e&&(await h(),f.value&&f.value.focus())});async function P(){if(t.value.id)try{const e=await m.patch(`${y}/api/transcriptions/cleaned-audio-files/${t.value.id}/toggle_evaluated/`);console.log(e.data.message),t.value.is_evaluated=!0,alert("Transcription saved successfully!")}catch(e){console.error("Error saving transcription:",e),alert("Could not save transcription.")}}async function N(){if(t.value.id)try{const e=await m.patch(`${y}/api/transcriptions/cleaned-audio-files/${t.value.id}/toggle_evaluated/`);console.log(e.data.message),t.value.is_evaluated=!1,alert("Audio Disapproved.")}catch(e){console.error("Error disapproving audio:",e),alert("Could not disapporve audio.")}}function S(){s.value<r.value.length-1&&s.value++}function I(){s.value>0&&s.value--}return(e,u)=>(R(),D("div",V,[a("div",j,[a("p",null,l(s.value+1)+" / "+l(b.value),1),a("h2",null," Evaluating Audio "+l(t.value.id),1)]),a("div",q,[a("audio",{ref_key:"audioPlayer",ref:o,class:"audio-player",controls:""},[a("source",{src:x.value,type:"audio/wav"},null,8,z),u[2]||(u[2]=L(" Your browser does not support the audio element. "))],512),a("div",F,[a("button",{onClick:C,disabled:i.value},"Play",8,U),a("button",{onClick:w,disabled:!i.value},"Pause",8,Y),a("button",{onClick:T},"Reset"),a("button",{onClick:u[0]||(u[0]=v=>g(-5))},"-5s"),a("button",{onClick:u[1]||(u[1]=v=>g(5))},"+5s")]),a("div",G," Time: "+l(c.value.toFixed(2))+"s / "+l(t.value.duration||0)+"s ",1)]),a("div",H,[a("button",{onClick:I,disabled:s.value===0}," Previous ",8,J),a("button",{onClick:N,disabled:t.value.is_evaluated===!1,class:"reject-button"}," Disapprove ",8,K),a("button",{onClick:P,disabled:t.value.is_evaluated===!0,class:"save-button"}," Approve ",8,O),a("button",{onClick:S,disabled:s.value===b.value-1}," Next ",8,Q)])]))}},ee=$(W,[["__scopeId","data-v-337db5c6"]]);export{ee as default};
