import{_ as I,r as i,c as u,A as L,n as M,D as T,a as c,b as e,E as C,t as n,d as V,v as R,F as U,x as j,h as P,j as z,o as d}from"./index-BAadExPG.js";import{a as x}from"./axios-T5aQCSLA.js";const O={class:"chunk-list-screen"},$={class:"statistics"},q={class:"progress-bar"},G={class:"progress-labels"},H={class:"sort"},J={class:"pagination"},K=["disabled"],Q=["disabled"],W={class:"audio-list"},X={key:0,class:"checkmark"},Y=["onClick"],Z={class:"pagination"},ee=["disabled"],te=["disabled"],ae={key:0,class:"error-message"},v=50,se={__name:"ChunkList",setup(ne){const _=i([]),p=u(()=>_.value.length),k=i("oldest"),h=i(""),S=L(),D=z(),s=i(1);M(async()=>{await B(),await E(),await T()});async function E(){try{const t=await x.get("/transcriptions/chunk-statistics/");l.value=t.data}catch(t){console.error("Error fetching statistics:",t)}}async function B(){try{const t=await x.get("/transcriptions/audio-chunks/");_.value=t.data,S.setAudioList(_.value),h.value=""}catch(t){console.error("Error fetching chunks:",t),h.value="Failed to load audio files. Please try again later."}}const g=u(()=>_.value.sort((t,a)=>k.value==="newest"?new Date(a.created_at)-new Date(t.created_at):new Date(t.created_at)-new Date(a.created_at))),F=u(()=>{const t=(s.value-1)*v,a=t+v;return g.value.slice(t,a)}),r=u(()=>Math.ceil(g.value.length/v));function f(){s.value<r.value&&s.value++}function b(){s.value>1&&s.value--}function N(t){const o=(s.value-1)*v+t;D.push({name:"ChunkEvaluationScreen",params:{absoluteIndex:o.toString()}})}const l=i({total_chunks:0,total_evaluated_chunks:0,total_unevaluated_chunks:0}),m=u(()=>l.value.total_chunks===0?0:(l.value.total_evaluated_chunks/l.value.total_chunks*100).toFixed(2)),w=u(()=>l.value.total_chunks===0?0:(l.value.total_unevaluated_chunks/l.value.total_chunks*100).toFixed(2));function A(t){return(s.value-1)*v+t}return(t,a)=>(d(),c("div",O,[e("div",$,[a[1]||(a[1]=e("h2",null,"Chunk Evaluation Progress",-1)),e("div",q,[e("div",{class:"progress-evaluated",style:C({width:m.value+"%"})},null,4),e("div",{class:"progress-unevaluated",style:C({width:w.value+"%"})},null,4)]),e("div",G,[e("span",null,"Evaluated: "+n(l.value.total_evaluated_chunks)+" ("+n(m.value)+"%)",1),e("span",null,"Unevaluated: "+n(l.value.total_unevaluated_chunks)+" ("+n(w.value)+"%)",1)])]),e("div",H,[a[3]||(a[3]=e("label",{for:"sort"},"Sort By:",-1)),V(e("select",{id:"sort","onUpdate:modelValue":a[0]||(a[0]=o=>k.value=o)},a[2]||(a[2]=[e("option",{value:"newest"},"Newest",-1),e("option",{value:"oldest"},"Oldest",-1)]),512),[[R,k.value]])]),e("div",J,[e("button",{onClick:b,disabled:s.value===1},"Previous",8,K),e("span",null,"Page "+n(s.value)+" of "+n(r.value),1),e("button",{onClick:f,disabled:s.value===r.value},"Next",8,Q),e("span",null,"Total: "+n(p.value),1)]),e("div",W,[(d(!0),c(U,null,j(F.value,(o,y)=>(d(),c("div",{key:o.id,class:"audio-card"},[o.is_evaluated?(d(),c("div",X,"âœ“")):P("",!0),e("p",null,n("chunk_"+A(y)),1),e("button",{class:"review-btn",onClick:le=>N(y)}," Review ",8,Y)]))),128))]),e("div",Z,[e("button",{onClick:b,disabled:s.value===1},"Previous",8,ee),e("span",null,"Page "+n(s.value)+" of "+n(r.value),1),e("button",{onClick:f,disabled:s.value===r.value},"Next",8,te),e("span",null,"Total: "+n(p.value),1)]),h.value?(d(),c("div",ae,n(h.value),1)):P("",!0)]))}},re=I(se,[["__scopeId","data-v-77942827"]]);export{re as default};
