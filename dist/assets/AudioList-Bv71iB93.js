import{a as m}from"./axios-C_WwstY2.js";import{_ as v,r as u,o as l,a as c,b as d,t as f,h as g,B as y,n as F,E as b,g as k,F as S,y as A,j as w}from"./index-BtTokaJG.js";const C={setup(){const n=u([]),e=u("");return{fileList:n,message:e,handleFolderSelection:a=>{const r=Array.from(a.target.files);n.value=r},submitFolder:async()=>{var a,r;try{if(n.value.length===0){e.value="No files selected.";return}const o=new FormData;n.value.forEach(p=>{o.append("files",p)});const t=await m.post("/transcriptions/process-audio/",o,{headers:{"Content-Type":"multipart/form-data"}});e.value=t.data.message}catch(o){e.value=((r=(a=o.response)==null?void 0:a.data)==null?void 0:r.error)||"Error processing files."}}}}},E={class:"folder-picker"},L=["disabled"],P={key:0,class:"message"};function x(n,e,i,s,a,r){return l(),c("div",E,[e[2]||(e[2]=d("h2",null,"Select a Folder to Process Audio Files",-1)),d("input",{type:"file",webkitdirectory:"",directory:"",onChange:e[0]||(e[0]=(...o)=>s.handleFolderSelection&&s.handleFolderSelection(...o))},null,32),d("button",{onClick:e[1]||(e[1]=(...o)=>s.submitFolder&&s.submitFolder(...o)),disabled:s.fileList.length===0},"Process Audio Files",8,L),s.message?(l(),c("p",P,f(s.message),1)):g("",!0)])}const B=v(C,[["render",x],["__scopeId","data-v-2f9bf4cc"]]),N={class:"audio-list-screen"},D={class:"audio-list"},V=["onClick"],I={key:0,class:"error-message"},M={__name:"AudioList",setup(n){const e=u([]);u("oldest");const i=u(""),s=y(),a=w();F(async()=>{await r(),await b()});async function r(){try{const t=await m.get("/transcriptions/cleaned-audio-files/?pending=true");e.value=t.data,s.setAudioList(e.value),i.value=""}catch(t){console.error("Error fetching audios:",t),i.value="Failed to load audio files. Please try again later."}}function o(t){console.log(t.toString()),a.push({name:"AudioEvaluationScreen",params:{startIndex:t.toString()}})}return(t,p)=>(l(),c("div",N,[k(B),d("div",D,[(l(!0),c(S,null,A(e.value,(h,_)=>(l(),c("div",{key:h.id,class:"audio-card"},[d("p",null,f("audio_"+_),1),d("button",{class:"review-btn",onClick:R=>o(_)}," Review ",8,V)]))),128))]),i.value?(l(),c("div",I,f(i.value),1)):g("",!0)]))}},j=v(M,[["__scopeId","data-v-9c2ba9f5"]]);export{j as default};
