import{_ as m,r as u,o as l,a as c,b as d,t as f,i as v,k as g,m as y,q as F,h as k,F as b,s as S,j as A}from"./index-DAQGSW67.js";import{u as w}from"./caseStore-Cyd_ywZb.js";const C={setup(){const n=u([]),e=u("");return{fileList:n,message:e,handleFolderSelection:a=>{const r=Array.from(a.target.files);n.value=r},submitFolder:async()=>{var a,r;try{if(n.value.length===0){e.value="No files selected.";return}const o=new FormData;n.value.forEach(p=>{o.append("files",p)});const t=await g.post("/transcriptions/process-audio/",o,{headers:{"Content-Type":"multipart/form-data"}});e.value=t.data.message}catch(o){e.value=((r=(a=o.response)==null?void 0:a.data)==null?void 0:r.error)||"Error processing files."}}}}},L={class:"folder-picker"},E=["disabled"],P={key:0,class:"message"};function x(n,e,i,s,a,r){return l(),c("div",L,[e[2]||(e[2]=d("h2",null,"Select a Folder to Process Audio Files",-1)),d("input",{type:"file",webkitdirectory:"",directory:"",onChange:e[0]||(e[0]=(...o)=>s.handleFolderSelection&&s.handleFolderSelection(...o))},null,32),d("button",{onClick:e[1]||(e[1]=(...o)=>s.submitFolder&&s.submitFolder(...o)),disabled:s.fileList.length===0},"Process Audio Files",8,E),s.message?(l(),c("p",P,f(s.message),1)):v("",!0)])}const N=m(C,[["render",x],["__scopeId","data-v-1df72f99"]]),B={class:"audio-list-screen"},D={class:"audio-list"},V=["onClick"],I={key:0,class:"error-message"},M={__name:"AudioList",setup(n){const e=u([]);u("oldest");const i=u(""),s=w(),a=A();y(async()=>{await r(),await F()});async function r(){try{const t=await g.get("/transcriptions/cleaned-audio-files/?pending=true");e.value=t.data,s.setAudioList(e.value),i.value=""}catch(t){console.error("Error fetching audios:",t),i.value="Failed to load audio files. Please try again later."}}function o(t){console.log(t.toString()),a.push({name:"AudioEvaluationScreen",params:{startIndex:t.toString()}})}return(t,p)=>(l(),c("div",B,[k(N),d("div",D,[(l(!0),c(b,null,S(e.value,(h,_)=>(l(),c("div",{key:h.id,class:"audio-card"},[d("p",null,f("audio_"+_),1),d("button",{class:"review-btn",onClick:R=>o(_)}," Review ",8,V)]))),128))]),i.value?(l(),c("div",I,f(i.value),1)):v("",!0)]))}},j=m(M,[["__scopeId","data-v-65283ef2"]]);export{j as default};
