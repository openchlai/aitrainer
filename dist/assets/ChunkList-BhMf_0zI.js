import{_ as N,r,c as u,q as L,m as M,z as A,a as c,b as e,B as y,t as s,d as T,v as V,F as z,A as R,h as C,u as U,o as d}from"./index-BsEMERiD.js";import{a as P}from"./axios-CU2zWRgY.js";const q={class:"chunk-list-screen"},I={class:"statistics"},O={class:"progress-bar"},$={class:"progress-labels"},j={class:"sort"},G={class:"pagination"},H=["disabled"],J=["disabled"],K={class:"audio-list"},Q={key:0,class:"checkmark"},W=["onClick"],X={class:"pagination"},Y=["disabled"],Z=["disabled"],ee={key:0,class:"error-message"},k=50,te={__name:"ChunkList",setup(ae){const v=r([]),p=u(()=>v.value.length),h=r("oldest"),_=r(""),x=L(),S=U(),n=r(1);M(async()=>{await D(),await B(),await A()});async function B(){try{const t=await P.get("/transcriptions/chunk-statistics/");l.value=t.data}catch(t){console.error("Error fetching statistics:",t)}}async function D(){try{const t=await P.get("/transcriptions/audio-chunks/");v.value=t.data,x.setAudioList(v.value),_.value=""}catch(t){console.error("Error fetching chunks:",t),_.value="Failed to load audio files. Please try again later."}}const g=u(()=>v.value.sort((t,a)=>h.value==="newest"?new Date(a.created_at)-new Date(t.created_at):new Date(t.created_at)-new Date(a.created_at))),E=u(()=>{const t=(n.value-1)*k,a=t+k;return g.value.slice(t,a)}),i=u(()=>Math.ceil(g.value.length/k));function f(){n.value<i.value&&n.value++}function m(){n.value>1&&n.value--}function F(t){console.log(t.toString()),S.push({name:"ChunkEvaluationScreen",params:{startIndex:t.toString()}})}const l=r({total_chunks:0,total_evaluated_chunks:0,total_unevaluated_chunks:0}),b=u(()=>l.value.total_chunks===0?0:(l.value.total_evaluated_chunks/l.value.total_chunks*100).toFixed(2)),w=u(()=>l.value.total_chunks===0?0:(l.value.total_unevaluated_chunks/l.value.total_chunks*100).toFixed(2));return(t,a)=>(d(),c("div",q,[e("div",I,[a[1]||(a[1]=e("h2",null,"Chunk Evaluation Progress",-1)),e("div",O,[e("div",{class:"progress-evaluated",style:y({width:b.value+"%"})},null,4),e("div",{class:"progress-unevaluated",style:y({width:w.value+"%"})},null,4)]),e("div",$,[e("span",null,"Evaluated: "+s(l.value.total_evaluated_chunks)+" ("+s(b.value)+"%)",1),e("span",null,"Unevaluated: "+s(l.value.total_unevaluated_chunks)+" ("+s(w.value)+"%)",1)])]),e("div",j,[a[3]||(a[3]=e("label",{for:"sort"},"Sort By:",-1)),T(e("select",{id:"sort","onUpdate:modelValue":a[0]||(a[0]=o=>h.value=o)},a[2]||(a[2]=[e("option",{value:"newest"},"Newest",-1),e("option",{value:"oldest"},"Oldest",-1)]),512),[[V,h.value]])]),e("div",G,[e("button",{onClick:m,disabled:n.value===1},"Previous",8,H),e("span",null,"Page "+s(n.value)+" of "+s(i.value),1),e("button",{onClick:f,disabled:n.value===i.value},"Next",8,J),e("span",null,"Total: "+s(p.value),1)]),e("div",K,[(d(!0),c(z,null,R(E.value,(o,se)=>(d(),c("div",{key:o.id,class:"audio-card"},[o.is_evaluated?(d(),c("div",Q,"âœ“")):C("",!0),e("p",null,s("chunk_"+o.id),1),e("button",{class:"review-btn",onClick:ne=>F(o.id-1)}," Review ",8,W)]))),128))]),e("div",X,[e("button",{onClick:m,disabled:n.value===1},"Previous",8,Y),e("span",null,"Page "+s(n.value)+" of "+s(i.value),1),e("button",{onClick:f,disabled:n.value===i.value},"Next",8,Z),e("span",null,"Total: "+s(p.value),1)]),_.value?(d(),c("div",ee,s(_.value),1)):C("",!0)]))}},ue=N(te,[["__scopeId","data-v-15c33e34"]]);export{ue as default};
