import{_ as g,r as p,o as d,c,a as s,t as _,b as y,m as h,h as F,x as S,s as k,n as b,w as A,y as C,k as D,F as x,z as L,u as B}from"./index-DJOWaoZy.js";import{a as E}from"./axios-CH74J7fz.js";const N={setup(){const l=p([]),e=p("");return{fileList:l,message:e,handleFolderSelection:n=>{const i=Array.from(n.target.files);l.value=i},submitFolder:async()=>{var n,i;try{if(l.value.length===0){e.value="No files selected.";return}const o=new FormData;l.value.forEach(m=>{o.append("files",m)});const f=await E.post("/transcriptions/process-audio/",o,{headers:{"Content-Type":"multipart/form-data"}});e.value=f.data.message}catch(o){e.value=((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.error)||"Error processing files."}}}}},P={class:"folder-picker"},V=["disabled"],M={key:0,class:"message"};function I(l,e,u,t,n,i){return d(),c("div",P,[e[2]||(e[2]=s("h2",null,"Select a Folder to Process Audio Files",-1)),s("input",{type:"file",webkitdirectory:"",directory:"",onChange:e[0]||(e[0]=(...o)=>t.handleFolderSelection&&t.handleFolderSelection(...o))},null,32),s("button",{onClick:e[1]||(e[1]=(...o)=>t.submitFolder&&t.submitFolder(...o)),disabled:t.fileList.length===0},"Process Audio Files",8,V),t.message?(d(),c("p",M,_(t.message),1)):y("",!0)])}const R=g(N,[["render",I],["__scopeId","data-v-1df72f99"]]),T={class:"audio-list-screen"},$={class:"sort"},z={class:"audio-list"},O=["onClick"],U={key:0,class:"error-message"},j={__name:"AudioList",setup(l){const e=p([]),u=p("oldest"),t=p(""),n=h(),i=B();F(async()=>{await o(),await S()});async function o(){try{const a=await k.get("http://127.0.0.1:8000/api/transcriptions/cleaned-audio-files/");e.value=a.data,n.setAudioList(e.value),t.value=""}catch(a){console.error("Error fetching audios:",a),t.value="Failed to load audio files. Please try again later."}}const f=b(()=>e.value.sort((a,r)=>u.value==="newest"?new Date(r.created_at)-new Date(a.created_at):new Date(a.created_at)-new Date(r.created_at)));function m(a){console.log(a.toString()),i.push({name:"AudioEvaluationScreen",params:{startIndex:a.toString()}})}return(a,r)=>(d(),c("div",T,[s("div",$,[r[2]||(r[2]=s("label",{for:"sort"},"Sort By:",-1)),A(s("select",{id:"sort","onUpdate:modelValue":r[0]||(r[0]=v=>u.value=v)},r[1]||(r[1]=[s("option",{value:"newest"},"Newest",-1),s("option",{value:"oldest"},"Oldest",-1)]),512),[[C,u.value]])]),D(R),s("div",z,[(d(!0),c(x,null,L(f.value,(v,w)=>(d(),c("div",{key:v.id,class:"audio-card"},[s("p",null,_("audio_"+v.id),1),s("button",{class:"review-btn",onClick:q=>m(w)}," Review ",8,O)]))),128))]),t.value?(d(),c("div",U,_(t.value),1)):y("",!0)]))}},J=g(j,[["__scopeId","data-v-c9c705c9"]]);export{J as default};
