import{_ as q,u as W,r,m as z,c as m,w as p,a as f,b as n,t as u,n as x,i as w,d as k,v as C,F as N,s as M,f as O,C as Y,g as Z,p as j,k as J,o as c,q as Q}from"./index-COiIlx8B.js";import{u as X}from"./caseStore-CwzcL8jD.js";const _={Kenya:[{name:"English",initials:"EN",official:!0},{name:"Swahili (Kiswahili)",initials:"SW",official:!0},{name:"Kikuyu (Gĩkũyũ)",initials:"KI",official:!1},{name:"Luo (Dholuo)",initials:"LU",official:!1},{name:"Luhya",initials:"LH",official:!1},{name:"Kalenjin",initials:"KA",official:!1},{name:"Kamba (Kikamba)",initials:"KB",official:!1},{name:"Meru (Kĩmĩrũ)",initials:"ME",official:!1},{name:"Maasai (Maa)",initials:"MA",official:!1},{name:"Somali",initials:"SO",official:!1}],Tanzania:[{name:"Swahili (Kiswahili)",initials:"SW",official:!0},{name:"English",initials:"EN",official:!0},{name:"Chaga (Kichaga)",initials:"CH",official:!1},{name:"Sukuma",initials:"SU",official:!1},{name:"Haya",initials:"HA",official:!1},{name:"Nyamwezi",initials:"NY",official:!1},{name:"Makonde",initials:"MK",official:!1},{name:"Zanaki",initials:"ZA",official:!1},{name:"Maasai (Maa)",initials:"MA",official:!1},{name:"Hehe",initials:"HE",official:!1}],Uganda:[{name:"English",initials:"EN",official:!0},{name:"Swahili (Kiswahili)",initials:"SW",official:!0},{name:"Luganda",initials:"LG",official:!1},{name:"Runyankore",initials:"RN",official:!1},{name:"Rukiga",initials:"RK",official:!1},{name:"Acholi (Luo dialect)",initials:"AC",official:!1},{name:"Langi (Lango dialect)",initials:"LA",official:!1},{name:"Lusoga",initials:"LS",official:!1},{name:"Alur",initials:"AL",official:!1},{name:"Runyoro-Rutooro",initials:"RR",official:!1}]},$={setup(){const s=W(),a=X(),h=j(),e=r(0),l=r(null),v=r(!1),i=r(0),d=r(!1),E=r(null);z(()=>{const o=parseInt(h.params.startIndex,10);e.value=Number.isNaN(o)?0:o});const g=m(()=>a.audioList),t=m(()=>g.value[e.value]||{}),A=r(t.value.gender||""),L=r(t.value.locale||""),b=r(t.value.feature_text||""),P=m(()=>g.value.length),I=m(()=>t.value.chunk_file||""),y=r(""),K=m(()=>y.value?_[y.value]||[]:[]);p(y,o=>{console.log("Country changed to:",o),console.log("Updated languages:",K.value)}),p(t,o=>{A.value=o.gender||"",L.value=o.locale||"",b.value=o.feature_text||""}),p(t,async()=>{v.value=!1,i.value=0,await Q(),l.value&&l.value.load()}),p(l,o=>{o&&(o.ontimeupdate=()=>i.value=o.currentTime,o.onplay=()=>v.value=!0,o.onpause=()=>v.value=!1,o.onloadedmetadata=()=>{t.value&&(t.value.duration=o.duration)})});function R(){l.value&&l.value.play()}function G(){l.value&&l.value.pause()}function D(){l.value&&(l.value.currentTime=0,v.value=!1,l.value.pause())}function U(o){if(!l.value)return;const S=l.value.duration;if(!S||isNaN(S))return;let T=l.value.currentTime+o;T=Math.min(Math.max(T,0),S),l.value.currentTime=T}async function V(){if(t.value.unique_id)try{await J.put(`/transcriptions/audio-chunks/${t.value.unique_id}/`,{feature_text:b.value,gender:A.value,locale:L.value}),t.value.is_evaluated=!0,s.success("Successfully saved Transcription details.")}catch(o){console.error("Error saving transcription:",o),s.error("Could not save transcription.")}}function H(){e.value<g.value.length-1&&e.value++}function B(){e.value>0&&e.value--}function F(){b.value.trim()&&(d.value=!0)}return{currentIndex:e,audioPlayer:l,isPlaying:v,currentTime:i,showApproveDialog:d,yesButton:E,audioList:g,currentAudio:t,selectedGender:A,selectedLanguage:L,transcriptionText:b,totalAudios:P,audioSrc:I,playAudio:R,pauseAudio:G,resetAudio:D,skipAudio:U,saveTranscriptionDetails:V,goNext:H,goPrevious:B,handleEnterKey:F,languages:_,selectedCountry:y,filteredLanguages:K}}},ee={class:"audio-screen"},ae={class:"top-bar"},ie={class:"audio-container"},ne={ref:"audioPlayer",class:"audio-player",controls:""},oe=["src"],le={class:"playback-buttons"},te=["disabled"],se=["disabled"],re={class:"current-time"},ue={class:"Gender-Language-Dropdowns"},de={class:"gender-dropdown"},fe=["for"],ce=["id"],ve={key:0,value:"",disabled:""},me={class:"country-dropdown"},ge=["value"],be={class:"language-dropdown"},ye=["value"],pe={key:0},ke={class:"transcription-box"},Ae={class:"action-buttons"},Le=["disabled"],Se=["disabled"];function Te(s,a,h,e,l,v){return c(),f("div",ee,[n("div",ae,[n("p",null,u(e.currentIndex+1)+" / "+u(e.totalAudios),1),n("h2",null," Transcribing Chunk "+u(e.currentIndex),1)]),n("div",ie,[n("audio",ne,[n("source",{src:e.audioSrc,type:"audio/wav"},null,8,oe),a[14]||(a[14]=x(" Your browser does not support the audio element. "))],512),n("div",le,[n("button",{onClick:a[0]||(a[0]=(...i)=>e.playAudio&&e.playAudio(...i)),disabled:e.isPlaying},"Play",8,te),n("button",{onClick:a[1]||(a[1]=(...i)=>e.pauseAudio&&e.pauseAudio(...i)),disabled:!e.isPlaying},"Pause",8,se),n("button",{onClick:a[2]||(a[2]=(...i)=>e.resetAudio&&e.resetAudio(...i))},"Reset"),n("button",{onClick:a[3]||(a[3]=i=>e.skipAudio(-5))},"-5s"),n("button",{onClick:a[4]||(a[4]=i=>e.skipAudio(5))},"+5s")]),n("div",re," Time: "+u(e.currentTime.toFixed(2))+"s / "+u(e.currentAudio.duration||0)+"s ",1)]),n("div",ue,[n("div",de,[s.genderLabel?(c(),f("label",{key:0,for:s.genderId},u(s.genderLabel),9,fe)):w("",!0),k(n("select",{id:s.genderId,"onUpdate:modelValue":a[5]||(a[5]=i=>e.selectedGender=i),class:"gender-select",onChange:a[6]||(a[6]=(...i)=>s.handleGender&&s.handleGender(...i))},[a[15]||(a[15]=n("option",{value:"",disabled:""},"Select Gender",-1)),s.genderPlaceholder?(c(),f("option",ve,u(s.genderPlaceholder),1)):w("",!0),a[16]||(a[16]=n("option",{value:"male"},"Male",-1)),a[17]||(a[17]=n("option",{value:"female"},"Female",-1))],40,ce),[[C,e.selectedGender]])]),n("div",null,[n("div",me,[k(n("select",{id:"country","onUpdate:modelValue":a[7]||(a[7]=i=>e.selectedCountry=i)},[a[18]||(a[18]=n("option",{value:"",disabled:""},"Select a country",-1)),(c(!0),f(N,null,M(e.languages,(i,d)=>(c(),f("option",{key:d,value:d},u(d),9,ge))),128))],512),[[C,e.selectedCountry]])]),n("div",be,[k(n("select",{id:"language","onUpdate:modelValue":a[8]||(a[8]=i=>e.selectedLanguage=i)},[a[19]||(a[19]=n("option",{value:"",disabled:""},"Select a language",-1)),(c(!0),f(N,null,M(e.filteredLanguages,(i,d)=>(c(),f("option",{key:d,value:i.initials},[x(u(i.name)+" ",1),i.official?(c(),f("span",pe," (Official)")):w("",!0)],8,ye))),128))],512),[[C,e.selectedLanguage]])])])]),n("div",ke,[a[20]||(a[20]=n("label",{for:"transcription"},"Transcription:",-1)),k(n("textarea",{id:"transcription",ref:"transcriptionInput","onUpdate:modelValue":a[9]||(a[9]=i=>e.transcriptionText=i),rows:"5",onKeydown:a[10]||(a[10]=Y(Z((...i)=>e.handleEnterKey&&e.handleEnterKey(...i),["prevent"]),["enter"]))},null,544),[[O,e.transcriptionText]])]),n("div",Ae,[n("button",{onClick:a[11]||(a[11]=(...i)=>e.goPrevious&&e.goPrevious(...i)),disabled:e.currentIndex===0}," Previous ",8,Le),n("button",{onClick:a[12]||(a[12]=(...i)=>e.saveTranscriptionDetails&&e.saveTranscriptionDetails(...i)),class:"save-button"}," Save "),n("button",{onClick:a[13]||(a[13]=(...i)=>e.goNext&&e.goNext(...i)),disabled:e.currentIndex===e.totalAudios-1}," Next ",8,Se)])])}const he=q($,[["render",Te],["__scopeId","data-v-18ed3f59"]]);export{he as default};
